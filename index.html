<!DOCTYPE html>
<html lang="en">

<!-- The following code has been developed by students and/or researchers of the Freshman Research Initiative, DIY Diagnostics Stream at The University of Texas at Austin.  This code is shared for demonstration purposes and should not be considered a product -- it is for entertainment purposes only.  Any user of this code does so at their own risk. Members of the DIY Stream, FRI, and The University of Texas system are not liable for anything related to this code.
 
  THIS CODE SHOULD NOT BE USED TO DIAGNOSE ANY KIND OF MEDICAL CONDITION.
 
  Further Information:
  http://cns.utexas.edu/fri
 
  Research Educator:
  Timothy E. Riedel
  triedel@utexas.edu
 
  Authors in chronological order of contribution:
  Author 1: Timothy E. Riedel
  Author 2: Valerie Foster
  Author 3: Bunsri Patel 
  
  References:
  http://docs.webplatform.org/wiki/concepts/programming/drawing_images_onto_canvas#Loading_the_image_programmatically
  http://www.html5rocks.com/en/tutorials/file/dndfiles/
  http://www.w3.org/TR/FileAPI/
  http://mobilehtml5.org/
  http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios
  
  Brief Description of Goal of Code:
  blah, blah, blah,
 
  Known Issues:
  blah, blah, blah, blah
-->

<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=.7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js" integrity="sha512-At/xiUTqCg8jxnCMRNDhDVDm4qxlyPt1K+GrDhUvRvR8MjlBq0RH65OVVaCXn3OuvyVWK8CdlQpxgrc/5YspHw==" crossorigin="anonymous"></script>

    <script>
        var docMod = document.lastModified; // gets last modified date and time of the index.html file
        console.log("This file last modified  " + docMod); // displays last modified date and time in the javascipt browser console
    </script>
</head>

<body>
    <div data-role="page">
        <div data-role="header">
            <h1>Detecting Lead in Water</h1>

            <div data-role="container">
                <script>
                    let sketch = function(p) {
                        let pixelInfo;
                        let pixelP;

                        let input;
                        let img;


                        p.setup = function() {
                            p.createCanvas(600, 500)
                            input = p.createFileInput(handleFile);
                            input.position(0, 0);
                            pixelP = p.createP('')
                        }

                        p.draw = function() {
                            if (img) {
                                p.image(img, 0, 0, p.width, p.height);
                                if (p.mouseX < 600 && p.mouseY < 500) {
                                    pixelInfo = p.get(p.mouseX, p.mouseY)
                                }
                                pixelP.html(pixelInfo)
                            }
                        }
                        let handleFile = function(file) {
                            console.log(file.name)
                            if (file.type === 'image') {
                                img = p.createImg(file.data, '');
                                console.log(img)
                                img.hide();
                            } else {
                                img = null;
                            }
                        }
                    };
                    new p5(sketch, 'container');
                </script>



            </div>
            <!-- /content -->
            <div data-role="footer" data-position="fixed">
                <p>DIY Diagnostics</p>
            </div>
            <!-- /footer -->
        </div>
        <!-- /page -->
</body>

</html>
